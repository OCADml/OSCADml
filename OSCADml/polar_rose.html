<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>polar_rose (OSCADml.polar_rose)</title><link rel="stylesheet" href="../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> â€“ <a href="index.html">OSCADml</a> &#x00BB; polar_rose</nav><header class="odoc-preamble"><h1 id="polar-rose"><a href="#polar-rose" class="anchor"></a>Polar Rose</h1><pre><code>open OCADml
open OSCADml</code></pre><p>Define a function that takes a radius <code>r</code> and angle <code>a</code>, and returns a z coordinate. This rose function is ported from the examples given in the <a href="https://github.com/rcolyer/plot-function">plot function</a> OpenSCAD library.</p><pre><code>let rose ~r ~a =
  let open Float in
  let x =
    pow
      ( (r *. cos a *. cos (r *. 8. *. pi /. 180.))
      +. (r *. sin a *. sin (r *. 35. *. pi /. 180.)) )
      2.
    /. -300.
  in
  ((15. +. (5. *. sin (r *. 10. *. pi /. 180.))) *. exp x) +. 1.</code></pre><p>Starting from the origin, step outward radially with <code>r_step</code> increments up to a maximal radius of <code>max_r</code>. For each of these radii, <code>rose</code> will be evaluated with angles revolving around the z-axis, evaluating to the height off of the XY plane that that position should be.</p><pre><code>let mesh = Mesh.polar_plot ~r_step:0.2 ~max_r:22. rose</code></pre><p>As the generated mesh contains quite a large number of points due to the relatively low value of <code>r_step</code> (megabytes), we'll take advantage of the <code>include</code> trick provided by the optional <code>?incl</code> parameter to <a href="OSCADml/Scad/index.html#val-to_file"><code>Scad.to_file</code></a>. This will produce a pair of <code>.scad</code> scripts, one named <code>&quot;incl_polar_rose.scad&quot;</code>, and another named <code>&quot;polar_rose.scad&quot;</code> that simply includes it. By loading the later into OpenSCAD rather than the former, we can avoid the sluggishness that can result when the editor attempts to handle large files.</p><pre><code>let () = Scad.to_file ~incl:true &quot;polar_rose.scad&quot; (Scad.of_mesh mesh)</code></pre>
<p style="text-align:center;">
<img src="../assets/polar_rose.png" style="width:150mm;"/>
</p> </header><div class="odoc-content"></div></body></html>