<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>rounded_prisms (OSCADml.rounded_prisms)</title><link rel="stylesheet" href="../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> â€“ <a href="index.html">OSCADml</a> &#x00BB; rounded_prisms</nav><header class="odoc-preamble"><h1 id="rounded-prisms"><a href="#rounded-prisms" class="anchor"></a>Rounded Prisms</h1><pre><code>open OCADml
open OSCADml</code></pre><p>If you are in need of extrusions with more continuous curvature than what can be achieved by <span class="xref-unresolved"><code>Mesh.Cap.t</code></span> specified sweep caps, there are the <span class="xref-unresolved"><code>Mesh.linear_prism</code></span> and <span class="xref-unresolved"><code>Mesh.prism</code></span>.</p><p>Generally, each of the <code>joint_</code> pairs describe the desired rounding length &quot;backwards&quot; and &quot;forwards&quot; from the edge (for <code>_top</code> and <code>_bot</code>, this is from the perspective of facing the opposite edge). The sign of the first element of the top and bot pairs determines whether the curvature flairs inwards or outwards, depending on the winding direction of the path (positive will lead to inward rounding for CCW paths).</p><p>For more details on what each of the <code>joint_</code> parameters for <span class="xref-unresolved"><code>Mesh.prism</code></span> mean, see the documentation for the <span class="xref-unresolved"><code>Mesh.Prism.spec</code></span> type.</p><pre><code>let () =
  Poly2.star ~r1:4. ~r2:8. 5
  |&gt; Mesh.(
       linear_prism
         ~outer:
           Prism.(
             spec
               ~joint_top:(0.95, 0.95)
               ~joint_bot:(-1., 1.)
               ~joint_sides:(`Flat (2., 2.))
               ())
         ~height:2.)
  |&gt; Scad.of_mesh
  |&gt; Scad.to_file &quot;rounded_prism_star.scad&quot;</code></pre>
<p style="text-align:center;">
<img src="../assets/rounded_prism_star.png" style="width:150mm;"/>
</p> <p>The <span class="xref-unresolved"><code>Mesh.prism</code></span> function provides us with a bit more power, allowing us to form meshes around our own transformed bottom and top polygons, rather than simply linearly extruding upward from the base polygon.</p><p>For this example, we'll make a box outline for our base, and rotate then translate the same shape up to act as our top polygon. Rotation about the y-axis does not break the requirements of <span class="xref-unresolved"><code>Mesh.prism</code></span>, since all of the sides will still be coplanar polygons. Note that z-axis rotations would violate this.</p><pre><code>let bot = Poly3.box ~center:true ~thickness:(v2 3. 3.) (v2 5. 5.)
let top = Poly3.translate (v3 0. 0. 5.) (Poly3.rotate (v3 0. (Float.pi /. 4.) 0.) bot)</code></pre><p>Create a rounded mesh between our <code>bot</code> and <code>top</code> polygons, with separate roundover joint specifications for the outer and inner shapes. By default, <code>?holes</code> will be <code>`Flip</code>, which mimics <code>~outer</code>, but negates the first element of <code>joint_top</code> and <code>joint_bot</code> to account for assumed opposite winding direction of the inner paths. In this example, we'll instead use <code>`Spec</code> to directily specify the treament of the inner path, in part to prevent collision of our outer and inner roundovers.</p><pre><code>let tunnel =
  let outer =
    Mesh.Prism.spec
      ~joint_top:(0.8, 0.8)
      ~joint_bot:(0.8, 0.8)
      ~joint_sides:(`Flat (1.5, 1.5))
      ()
  and holes =
    `Spec
      (Mesh.Prism.spec
         ~joint_top:(-0.5, 0.5)
         ~joint_bot:(-0.5, 0.5)
         ~joint_sides:(`Flat (0.5, 0.5))
         () )
  in
  Mesh.prism ~fn:16 ~outer ~holes bot top</code></pre><p>Convert our <code>tunnel</code> mesh into an OpenSCAD polyhedron and output to file.</p><pre><code>let () = Scad.to_file &quot;rounded_prism_tunnel.scad&quot; (Scad.of_mesh tunnel)</code></pre>
<p style="text-align:center;">
<img src="../assets/rounded_prism_tunnel.png" style="width:150mm;"/>
</p> </header><div class="odoc-content"></div></body></html>